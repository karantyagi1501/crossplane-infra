apiVersion: ec2.aws.crossplane.io/v1beta1
kind: VPC
metadata:
  name: {{ .Values.vpc.name | quote }}
  {{- if .Values.installOrder.enabled }}
  annotations:
    argocd.argoproj.io/sync-wave: {{ .Values.installOrder.vpcWave | quote }}
    argocd.argoproj.io/sync-options: SkipDryRunOnMissingResource=true
  {{- end }}
spec:
  forProvider:
    region: {{ .Values.aws.region | quote }}
    cidrBlock: {{ .Values.vpc.cidrBlock | quote }}
    enableDnsSupport: {{ .Values.vpc.enableDnsSupport }}
    enableDnsHostnames: {{ .Values.vpc.enableDnsHostnames }}
    tags:
{{- range $key, $value := .Values.vpc.tags }}
      {{ $key }}: {{ $value | quote }}
{{- end }}
  providerConfigRef:
    name: aws-provider
